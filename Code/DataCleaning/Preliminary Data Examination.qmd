---
title: "Preliminary Data Examination"
author: "Marliese Baer"
format: html
editor: visual
---

## Set Up
```{r}
rm(list = ls())
library(tidyverse)
library(here)
library(ggfortify)
library(readr)
```

## Pull in original data
```{r}
Cape_May <- read.csv(here("Data", "HawkWatch Data csv", "Cape_May.csv"))
Goshute_Mtns <- read.csv(here("Data", "HawkWatch Data csv", "Goshute_Mtns.csv"))
Hawk_Ridge <- read.csv(here("Data", "HawkWatch Data csv", "Hawk_Ridge.csv"))

Cape_May
Goshute_Mtns
Hawk_Ridge
```

## Tidying

### Tidying the Cape May data set
```{r}
Cape_May <- read.csv(here("Data", "try", "Cape_May.csv"))
```
trying to read in the original dataset and not the one that I deleted the first few columns of because there is a much much better way to do it in R as demonstrated below.

### Tidying the Goshutes data set
```{r}
Goshute_Mtns_2 <- read.csv(here("Data", "HawkWatch Data csv", "Goshute_Mtns.csv"), na = c("NA"), skip = 3) |> slice(-(1))
head(Goshute_Mtns_2)

#need to re-specify classes of variables. I tried to do it using col_types = cols() and spec() (col_types = cols(Date = col_factor()) but for some reason it isn't working so I am just going to modify some locally using mutate and as._____ below. I would like to come back and do it when reading in the data however, because it is just way cleaner.

Gtake_1 <- Goshute_Mtns_2 |>
  pivot_longer(c(6:28), names_to = "Species",
               values_to = "n_spp") |>
  filter(Species == "RT" | Species == "SS" | Species == "CH" | Species == "AK" | Species == "PG") |>
  mutate(Date = as.factor(Date)) |>
  mutate(n_spp = as.double(n_spp)) |>
  mutate(Species = as.factor(Species)) |>
  group_by(Date, Species) |>
  mutate(total_n = sum(n_spp)) |>
  mutate(Duration = as.double(Duration))|>
  group_by(Date, Species) |>
  mutate(duration_min_day = sum(Duration))

#because I am mutating and not summarizing, it isn't making a new df. Maybe need to keep only columns want to use and make new df to use (multiple for diff uses).

#need to standardize by hour somehow. perhaps by day number observed/hours observed?

#move spp and duration to the start of the df (reorder)

```


### Tidying Hawk Ridge
```{r}
Hawk_Ridge_2 <- read.csv(here("Data", "HawkWatch Data csv", "Hawk_Ridge.csv"), na = c("NA"), skip = 3)
head(Hawk_Ridge_2)

#cant slice(-(1)) because in this df they split up into age classes and that row actually contains important info
#how can i combine row 1 into column headers? I could factor_recode but it would just take a long time
#because can't have column names that are the same, R added .x to the end of the spp codes that are repeated, x=the number of that same spp repeated as a column.
# I can't really pivot longer until this issue is resolved because it will mess some stuff up.
#need to have just one column per species and have a new column for age and a new column for unit

#take_1H <- Hawk_Ridge_2 |>
#  pivot_longer(c(6:28), names_to = "Species",
#               values_to = "n_spp") |>
#  filter(Species == "RT" | Species == "SS" | Species == "CH" | Species == "AK" | Species == "PG") |>
#  mutate(Date = as.factor(Date)) |>
#  mutate(n_spp = as.double(n_spp)) |>
#  mutate(Species = as.factor(Species)) |>
#  group_by(Date, Species) |>
#  mutate(total_n = sum(n_spp)) |>
#  mutate(Duration = as.double(Duration))|>
#  group_by(Date, Species) |>
#  mutate(duration_min_day = sum(Duration))
```



notes on data cleaning:
emit row 1

pivot_longer() -> make spp a column


what i want cape may:
column date (julian date)
column time (number of hours per day)
column spp - only 5 species (w number of species sighted)


what i want hawk ridge and goshutes:
keep only 5 spp
combine all ages
column date
column time

standardize by hours observed/day


